<div class="modal-dialog modal-lg" role="document">
  <div class="modal-content">
    <%= form_for [:relax_admin, class_name_from_association(f.object, a).constantize.new], remote: true, html: {'data-type': 'json'} do |fs| %>
      <div class="modal-header">
        <%= t('relax_admin.view.create') %>
        <%= class_name_from_association(f.object, a).constantize.model_name.human.downcase %>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="errors-json"></div>
        <%= render 'relax_admin/shared/errors_data_new' %>
        <% if @model.id.blank? %>
          <% if a.is_a?(Hash) %>
            <% params_assoc = "RelaxAdmin::Models::#{class_name_from_association(f.object, a).pluralize}Controller".constantize.new.create_params(from: @model_class).each %>
          <% else %>
            <% params_assoc = "RelaxAdmin::Models::#{a.to_s.classify.pluralize}Controller".constantize.new.create_params(from: @model_class).each %>
          <% end %>
          <% else %>
          <% if a.is_a?(Hash) %>
            <% params_assoc = "RelaxAdmin::Models::#{class_name_from_association(f.object, a).pluralize}Controller".constantize.new.update_params(from: @model_class).each %>
          <% else %>
            <% params_assoc = "RelaxAdmin::Models::#{a.to_s.classify.pluralize}Controller".constantize.new.update_params(from: @model_class).each %>
          <% end %>
        <% end %>
        <% params_assoc.each do |attribute| %>
          <%= render 'relax_admin/fields/form_group', f: fs, a: attribute %>
        <% end %>
      </div>
      <div class="modal-footer">
        <a href="#" data-dismiss="modal"><%= t('relax_admin.view.cancel') %></a>
        <button type="submit" class="btn btn-primary pull-right"><%= t('relax_admin.view.save') %></button>
      </div>
    <% end %>
  </div>
</div>
